<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:jsf="http://xmlns.jcp.org/jsf"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <f:metadata>
        <f:viewAction action="#{fastFoodBean.init()}"/>
    </f:metadata>
    <h:head>
        <title>FastFood</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="shortcut icon" href="resources/imagens/mesa.png" type="image/x-icon" />
        <meta name="mobile-web-app-capable" content="yes" />
        <h:outputStylesheet library="css" name="bootstrap.css" />
        <h:outputStylesheet library="css" name="fast.css" />
        <script src="resources/js/bootstrap.min.js"></script>
        <script src="resources/js/fastfood.js"></script>
        <script>
            window.onload = function () {
                limitarCaracteres();
                desabilitarBotoes();
            };
        </script>
    </h:head>
    <h:body>
        <h:form id="frm">
            <p:commandLink id="comandas" style="display: none;" actionListener="#{fastFoodBean.listarComandas()}"
                           update="dlPesquisaComanda" process="@this"
                           oncomplete="PF('dialogoPesquisaComanda').show();"
                           onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()"/>
            <p:commandButton id="sair" style="display: none;" actionListener="#{fastFoodBean.sair()}"/>
            <div class="container-fluid">
                <div class="row">
                    <nav class="navbar navbar-inverse">
                        <div class="container-fluid">
                            <!-- Brand and toggle get grouped for better mobile display -->
                            <div class="navbar-header">
                                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                                    <span class="sr-only"></span>
                                    <span class="icon-bar"></span>
                                    <span class="icon-bar"></span>
                                    <span class="icon-bar"></span>
                                </button>
                                <a class="navbar-brand">#{fastFoodBean.usuario.NOME}</a>
                            </div>
                            <!-- Collect the nav links, forms, and other content for toggling -->
                            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                                <ul class="nav navbar-nav">
                                    <li>
                                        <a onclick="document.getElementById('frm:comandas').click();" style="cursor: pointer;">Comandas</a>
                                    </li>
                                    <li>
                                        <a onclick="document.getElementById('frm:sair').click();" style="cursor: pointer;">Sair</a>
                                    </li>
                                </ul>
                                <ul class="nav navbar-nav navbar-right">
                                    <li>
                                        <h:panelGroup id="total">
                                            <h4 style="color:#fff !important;">Total</h4> 
                                            <h:outputText value="#{fastFoodBean.total}" style="font-size: 15pt;color:#fff !important;">
                                                <f:convertNumber pattern="###,##0.00"/>    
                                            </h:outputText>
                                        </h:panelGroup>
                                    </li>
                                </ul>
                            </div><!-- /.navbar-collapse -->
                        </div><!-- /.container-fluid -->
                    </nav>
                </div>
                <div class="row">
                    <div class="row campo-pesquisa">
                        <h:inputText class="form-control" style="font-size: 15pt; color: #858585 !important;"
                                     value="#{fastFoodBean.pesquisa}" onkeyup="this.value = this.value.toUpperCase();">
                            <f:passThroughAttribute name="placeholder" value="Pesquisa"/>
                            <f:passThroughAttribute name="autofocus" value="true"/>
                            <f:ajax event="keyup" render="frm:produto" execute="@this" listener="#{fastFoodBean.pesquisarProduto()}"
                                    onevent="limitarCaracteres"/>
                        </h:inputText>
                    </div>
                    <div class="col-md-2 barra-grupo">
                        <ul jsf:id="listaGrupo">
                            <ui:repeat id="prd" value="#{fastFoodBean.grupos}" var="g" varStatus="indexpdr">
                                <li jsf:id="item">
                                    <p:commandLink update="frm:produto" process="@this" actionListener="#{fastFoodBean.pesquisarPorGrupo(g)}" oncomplete="limitarCaracteres()"
                                                   partialSubmit="true" onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()">
                                        <p:graphicImage id="img" library="imagens" name="drink.png" width="35" class="li-grupo"/> 
                                        <p:outputPanel id="grupo">
                                            #{g.t51dsgrp}
                                        </p:outputPanel>
                                    </p:commandLink> 
                                </li>                                 
                            </ui:repeat>   
                        </ul>          
                    </div>
                    <div class="col-xs-7" style="overflow: auto; height: 350px;">
                        <h:panelGroup id="produto">
                            <ui:repeat id="loop" value="#{fastFoodBean.produtos}" var="produto" varStatus="status">
                                <div class="col-xs-2 produto">
                                    <!--<h:panelGroup id="adicaoProduto" style="cursor: pointer;">-->
                                        <p:commandLink update="frm:itens frm:total" process="@this frm:loop:#{status.index}:qtdInput" actionListener="#{fastFoodBean.adicionarItem(produto)}"
                                                       style="color: #fff;" onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()">
                                            <div class="row text-center">
                                                <div class="col-xs-12 text-center">
                                                    <span class="nome-produto" style="font-size: 8pt;">#{produto.descricao}</span>
                                                </div>
                                            </div>
                                            <f:ajax event="click"  
                                                    onevent="mandarFocu"/>
                                            <div class="row text-center" style="font-size: 8pt;">
                                                <h:outputText value="#{produto.preco}">
                                                    <f:convertNumber pattern="###,##0.00"/>
                                                </h:outputText>
                                            </div>
                                        </p:commandLink>  
                                    <!--</h:panelGroup>-->  
                                    <div class="row" style="margin-top: 15px;">
                                        <div class="col-xs-4 text-left">
                                            <span class="btn btn-danger fa fa-minus"
                                                  onclick="removerQuantidade('frm:loop:#{status.index}:qtd', 'frm:loop:#{status.index}:qtdInput')"></span>
                                        </div>
                                        <div class="col-xs-3 text-center" style="font-size: 12pt;">
                                            <h:outputText id="qtd" value="1" />
                                            <h:inputText id="qtdInput" value="#{fastFoodBean.quantidade}" style="display: none;"/>
                                        </div>
                                        <div class="col-xs-4 text-right" >
                                            <span class="btn btn-success fa fa-plus" onclick="adicionarQuantidade('frm:loop:#{status.index}:qtd', 'frm:loop:#{status.index}:qtdInput');"></span>
                                        </div>
                                    </div>
                                </div>
                            </ui:repeat>
                        </h:panelGroup>  
                    </div>
                    <div class="col-xs-3 lista-itens" style="overflow: auto; height: 350px;">
                        <h:panelGroup id="itens">
                            <h:outputText value="Nenhum registro adicionado." rendered="#{empty fastFoodBean.lancamentos}"/>
                            <table class="table table-hover">
                                <tbody>
                                    <ui:repeat id="itensAdicionados" value="#{fastFoodBean.lancamentos}" var="lacamento">
                                        <tr style="background: #f0fef0;">
                                            <td>
                                                <div class="row referencia" >
                                                    <div class="col-xs-5">Ref #{lacamento.referencia}</div>
                                                    <div class="col-xs-3 text-center">Qt #{lacamento.quantidade}</div>
                                                    <div class="col-xs-4 text-right">Val #{lacamento.preco}</div>  
                                                </div>
                                                <div class="row item">
                                                    <div class="col-xs-9">#{lacamento.descricao}</div>
                                                    <div class="col-xs-2">
                                                        <h:outputText value="#{lacamento.precoTotal}">
                                                            <f:convertNumber pattern="###,##0.00"/>
                                                        </h:outputText>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <h:commandLink id="apagarG" class="btn btn-danger" style="color: #bbb;font-size:11pt;" actionListener="#{fastFoodBean.removerItem(lacamento)}"
                                                               rendered="#{not empty fastFoodBean.usuario.GERENTE}"
                                                               >
                                                    <i class="fa fa-trash"></i>
                                                    <f:ajax render="frm:itens frm:total" execute="@this" />
                                                </h:commandLink>
                                                <p:commandLink id="apagarN" class="btn btn-danger" style="color: #bbb;font-size:11pt;" actionListener="#{fastFoodBean.setLancamento(lacamento)}"
                                                               rendered="#{empty fastFoodBean.usuario.GERENTE and lacamento.imprimir eq '1'}"
                                                               update="frmDialogo frm:total" process="@this"
                                                               oncomplete="PF('dialogoUsuario').show();">
                                                    <i class="fa fa-trash"></i>
                                                </p:commandLink>
                                                <p:commandLink id="apagarNG" class="btn btn-danger" style="color: #bbb;font-size:11pt;" actionListener="#{fastFoodBean.removerItem(lacamento)}"
                                                               rendered="#{empty fastFoodBean.usuario.GERENTE and lacamento.imprimir eq '0'}"
                                                               update="frm:itens frm:total" process="@this">
                                                    <i class="fa fa-trash"></i>
                                                </p:commandLink>
                                                <button style="background: #fff;outline: none;border: none;" class="focu"></button>
                                            </td>
                                        </tr>
                                    </ui:repeat>  
                                </tbody>
                            </table>
                        </h:panelGroup> 
                    </div>
                </div>
            </div>

            <div class="container-fluid barra-botoes" >
                <div class="row " >
                    <div class="col-md-9 botoes-rapidos" >
                        <div class="row " >
                            <div class="col-md-12">
                                <div class="col-md-3">
                                    <h:commandLink class="btn btn-block btn-primary" 
                                                   actionListener="#{fastFoodBean.buscarProduto(fastFoodBean.atalhoFastFood.referencia01)}">
                                        #{fastFoodBean.atalhoFastFood.descricao01}
                                        <f:ajax execute="@this" render="frm:itens frm:total" onevent="mandarFocu"/>
                                    </h:commandLink>
                                </div>
                                <div class="col-md-3">
                                    <h:commandLink class="btn btn-block btn-primary"
                                                   actionListener="#{fastFoodBean.buscarProduto(fastFoodBean.atalhoFastFood.referencia02)}"
                                                   >
                                        #{fastFoodBean.atalhoFastFood.descricao02}
                                        <f:ajax execute="@this" render="frm:itens frm:total" onevent="mandarFocu"/>
                                    </h:commandLink>
                                </div>
                                <div class="col-md-3">
                                    <h:commandLink class="btn btn-block btn-primary"
                                                   actionListener="#{fastFoodBean.buscarProduto(fastFoodBean.atalhoFastFood.referencia03)}">
                                        #{fastFoodBean.atalhoFastFood.descricao03}
                                        <f:ajax execute="@this" render="frm:itens frm:total" onevent="mandarFocu"/>
                                    </h:commandLink>
                                </div>
                                <div class="col-md-3">
                                    <h:commandLink class="btn btn-block btn-primary"
                                                   actionListener="#{fastFoodBean.buscarProduto(fastFoodBean.atalhoFastFood.referencia04)}">
                                        #{fastFoodBean.atalhoFastFood.descricao04}
                                        <f:ajax execute="@this" render="frm:itens frm:total" onevent="mandarFocu"/>
                                    </h:commandLink>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="col-md-3">
                                    <h:commandLink class="btn btn-block btn-primary"
                                                   actionListener="#{fastFoodBean.buscarProduto(fastFoodBean.atalhoFastFood.referencia05)}">
                                        #{fastFoodBean.atalhoFastFood.descricao05}
                                        <f:ajax execute="@this" render="frm:itens frm:total" onevent="mandarFocu"/>
                                    </h:commandLink>
                                </div>
                                <div class="col-md-3">
                                    <h:commandLink class="btn btn-block btn-primary"
                                                   actionListener="#{fastFoodBean.buscarProduto(fastFoodBean.atalhoFastFood.referencia06)}">
                                        #{fastFoodBean.atalhoFastFood.descricao06}
                                        <f:ajax execute="@this" render="frm:itens frm:total" onevent="mandarFocu"/>
                                    </h:commandLink>
                                </div>
                                <div class="col-md-3">
                                    <h:commandLink class="btn btn-block btn-primary"
                                                   actionListener="#{fastFoodBean.buscarProduto(fastFoodBean.atalhoFastFood.referencia07)}">
                                        #{fastFoodBean.atalhoFastFood.descricao07}
                                        <f:ajax execute="@this" render="frm:itens frm:total" onevent="mandarFocu"/>
                                    </h:commandLink>
                                </div>
                                <div class="col-md-3">
                                    <h:commandLink class="btn btn-block btn-primary"
                                                   actionListener="#{fastFoodBean.buscarProduto(fastFoodBean.atalhoFastFood.referencia08)}">
                                        #{fastFoodBean.atalhoFastFood.descricao08}
                                        <f:ajax execute="@this" render="frm:itens frm:total" onevent="mandarFocu"/>
                                    </h:commandLink>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="col-md-3">
                                    <h:commandLink class="btn btn-block btn-primary" 
                                                   actionListener="#{fastFoodBean.buscarProduto(fastFoodBean.atalhoFastFood.referencia09)}">
                                        #{fastFoodBean.atalhoFastFood.descricao09}
                                        <f:ajax execute="@this" render="frm:itens frm:total" onevent="mandarFocu"/>
                                    </h:commandLink>
                                </div>
                                <div class="col-md-3">
                                    <h:commandLink class="btn btn-block btn-primary"
                                                   actionListener="#{fastFoodBean.buscarProduto(fastFoodBean.atalhoFastFood.referencia10)}">
                                        #{fastFoodBean.atalhoFastFood.descricao10}
                                        <f:ajax execute="@this" render="frm:itens frm:total" onevent="mandarFocu"/>
                                    </h:commandLink>
                                </div>
                                <div class="col-md-3">
                                    <h:commandLink class="btn btn-block btn-primary"
                                                   actionListener="#{fastFoodBean.buscarProduto(fastFoodBean.atalhoFastFood.referencia11)}">
                                        #{fastFoodBean.atalhoFastFood.descricao11}
                                        <f:ajax execute="@this" render="frm:itens frm:total" onevent="mandarFocu"/>
                                    </h:commandLink>
                                </div>
                                <div class="col-md-3">
                                    <h:commandLink class="btn btn-block btn-primary"
                                                   actionListener="#{fastFoodBean.buscarProduto(fastFoodBean.atalhoFastFood.referencia12)}">
                                        #{fastFoodBean.atalhoFastFood.descricao12}
                                        <f:ajax execute="@this" render="frm:itens frm:total" onevent="mandarFocu"/>
                                    </h:commandLink>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3" >
                        <p:commandLink class="btn btn-block btn-warning" style="padding-top: 20px;font-size: 25pt;height: 110px;"
                                       actionListener="#{fastFoodBean.finalizar()}" update="frm:itens frm:total"
                                       process="@this" onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()">
                            Finalizar
                        </p:commandLink>
                    </div>
                </div>
            </div>
        </h:form>
        <p:dialog id="dlFinalizar" widgetVar="dialogFinalizar" header="Finalizar" draggable="false" dynamic="true" responsive="true" resizable="false"
                  modal="true" showEffect="fade" position="center">
            <h:form id="frmFinalizar">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-md-12">
                            <h:outputLabel value="Comanda"/>
                            <h:inputText id="numeroComanda" class="form-control" required="true"
                                         requiredMessage="Comanda obrigatoria!"
                                         onkeyup="apenasNumeros(this)"
                                         value="#{fastFoodBean.comandas.COMANDA}">
                                <f:passThroughAttribute name="placeholder" value="Número da comanda."/>
                            </h:inputText>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <div class="ui-g-12 ui-md-4">
                                <div class="ui-inputgroup">
                                    <span class="btn btn-danger fa fa-minus"
                                          onclick="removerQuantidade('frmFinalizar:labelPessoas', 'frmFinalizar:pessoas');"/> 
                                    <h:outputText id="labelPessoas" value="1" style="font-size: 13pt;"/>
                                    <p:inputText id="pessoas" placeholder="Pessoas" value="#{fastFoodBean.comandas.PESSOAS}" 
                                                 style="display: none;"/>
                                    <span class="btn btn-success fa fa-plus"
                                          onclick="adicionarQuantidade('frmFinalizar:labelPessoas', 'frmFinalizar:pessoas');"/>     
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <p:commandLink class="btn btn-success btn-block" process="frmFinalizar"
                                           actionListener="#{fastFoodBean.finalizar()}" update="frm:itens frm:total"
                                           onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()">
                                <i class="fa fa-check"></i>
                                Confirma
                            </p:commandLink>
                        </div>
                    </div>
                </div>
            </h:form>
            <script>
                function apenasNumeros(input) {
                    var regExp = /[^0-9]/g;
                    input.value = input.value.replace(regExp, "");
                    input.value = ("0000" + input.value).slice(-4);
                }
            </script>
        </p:dialog>
        <p:dialog id="dlQuantidade" widgetVar="dialogQuantidade" header="Definir Quantidade" draggable="false" dynamic="true" responsive="true" resizable="false"
                  modal="true" showEffect="fade" position="center">
            <p:ajax event="close" process="@this" listener="#{fastFoodBean.novoProduto()}" />
            <h:form id="frmQauntidade">
                <p:messages id="msgQuantidade" closable="true" showIcon="false" style="color: #fff !important;"/>
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-md-12">
                            <h:outputLabel value="Quantidade"/>
                            <h:inputText id="inputQuantidade" class="form-control" value="#{fastFoodBean.quantidade}"
                                         onkeyup="this.value = this.value.replace(/[^0,-9,]/g, '');"
                                         converter="converterValor">
                                <f:passThroughAttribute name="placeholder" value="Quantidade"/>
                                <f:passThroughAttribute name="autofocus" value="true"/>
                                <f:passThroughAttribute name="type" value="tel"/>
                            </h:inputText>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <p:commandLink process="@form" update="@form frm:itens frm:total msgQuantidade"
                                           actionListener="#{fastFoodBean.definirQuantidade()}"
                                           oncomplete="selecionarCampo('frmQauntidade:inputQuantidade');">
                                <i class="fa fa-check"></i>
                                Quantidade
                            </p:commandLink>
                        </div>
                    </div>
                </div>
                <p:commandButton id="default" style="display: none;"/>
                <p:defaultCommand target="default"/>
            </h:form>
        </p:dialog>
        <!--FORMULARIO DE AUTORIZAÇÃO-->
        <p:dialog header="Autorização" resizable="false" modal="true" responsive="true" fitViewport="true" draggable="false" width="300" id="dlUsuario" widgetVar="dialogoUsuario" dynamic="true" 
                  closable="false" closeOnEscape="true"
                  showEffect="fade" hideEffect="fade">
            <h:form id="frmDialogo"> 
                <p:messages id="msgUsuario" closable="true" showIcon="false"/>
                <div class="ui-fluid">                    
                    <p:panelGrid id="panelUsuario" columns="1" layout="grid" styleClass="ui-panelgrid-blank">
                        <p:focus for="usuario"/>
                        <p:outputLabel for="usuario" value="Usuario" class="modal-text"/>
                        <p:inputText id="usuario"  label="usuario" required="true" requiredMessage="Nome do Usuario devi ser informado" maxlength="15" style="text-transform: uppercase;"
                                     value="#{fastFoodBean.usuarioBean.usuario.NOME}"/>
                        <p:outputLabel for="senha" value="Senha" class="modal-text"/>
                        <p:password id="senha" required="true" requiredMessage="Senha do Usuario devi ser informado" maxlength="10" 
                                    value="#{fastFoodBean.usuarioBean.usuario.SENHA}"/>
                    </p:panelGrid>
                </div>
                <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank">
                    <p:commandLink id="sim" class="btn-modal btn btn-success btn-block" 
                                   value="Confirma" oncomplete="handleLoginRequest(xhr, status, args);" resetValues="true"
                                   update="frm:itens msgUsuario" process="@this frmDialogo:panelUsuario" actionListener="#{fastFoodBean.validarUsuario()}"/>
                    <a id="nao" class="btn-modal btn btn-danger btn-block" onclick="PF('dialogoUsuario').hide();">
                        Cancelar
                    </a>
                </p:panelGrid>
                <p:defaultCommand target="sim" />
            </h:form>
            <script type="text/javascript">
                function handleLoginRequest(xhr, status, args) {
                    if (args.fechar) {
                        PF('dialogoUsuario').hide();
                    }
                }
            </script>
        </p:dialog>
        <!--MODAL DE ENVIO PARA IMPRESSÃO-->
        <h:form id="frmDialogMensagem">
            <p:dialog  styleClass="mensagem-impressao" resizable="false" focus="voltar" modal="true" responsive="true" fitViewport="true" draggable="false" width="100%"  id="dlImpressao" widgetVar="dialogoImpressao" dynamic="true" 
                       closable="false" closeOnEscape="true"
                       showEffect="fade" hideEffect="fade" visible="false">
                <span style="font-size: 15pt;text-align: center;">#{produtoBean.mensagem}</span>
                <p:commandLink id="voltar" oncomplete="PF('dialogoImpressao').hide();" process="@this" update="frm:itens" class="btn-modal btn btn-warning btn-block"  style="margin-top: 30px; color: #fff;">OK</p:commandLink>
            </p:dialog>
        </h:form>
        <!--FORMULARIO DE PESQUISA DE COMANDAS-->
        <p:dialog header="Pesquisa de comanda" resizable="false" modal="true" responsive="true" fitViewport="true" draggable="false" width="100%" id="dlPesquisaComanda" widgetVar="dialogoPesquisaComanda" dynamic="true" 
                  closable="true" closeOnEscape="true"  
                  showEffect="fade" hideEffect="fade" position="top">
            <h:form id="frmPesquisaComanda">
                <div class="ui-fluid">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-md-12">
                                <h:inputText value="#{fastFoodBean.pesquisa}" class="form-control">
                                    <f:passThroughAttribute name="placeholder" value="Pesquisa de Comanda"/>
                                    <f:passThroughAttribute name="type" value="tel"/>
                                    <f:ajax event="keyup" execute="@this" render="tabelaComanda" listener="#{fastFoodBean.pesquisarComandas()}"/>
                                </h:inputText>                                
                            </div>
                        </div>
                    </div>
                    <h3 style="text-align: center;">#{empty fastFoodBean.listaComandas ? 'Nenhum registro encontrado.' : ''}</h3>
                    <ul jsf:id="tabelaComanda">
                        <ui:repeat  value="#{fastFoodBean.listaComandas}" var="item">   
                            <li>    
                                <div jsf:id="listaComanda" class="#{item.STATUS eq 'P' ? 'mesa-vermelha' : 'mesa' }" style="padding-top: 1px;">
                                    <p:commandLink id="linkComanda" 
                                                   process="@this" update="frm:itens frm:total" actionListener="#{fastFoodBean.abrirComanda(item)}"
                                                   oncomplete="PF('dialogoPesquisaComanda').hide();">
                                        <h3 style="color: #fff; font-weight: bold;">#{item.COMANDA}</h3>
                                        <h:outputLabel id="label" style="font-size: 12pt;font-weight: bold;color: #fff;" value="#{item.TOTAL}">
                                            <f:convertNumber for="label" pattern="#,##0.00"/>
                                        </h:outputLabel>
                                        <f:param name="mesa" value="#{item.MESA}"/>
                                        <f:param name="comanda" value="#{item.COMANDA}"/>
                                        <f:param name="pedido" value="#{item.PEDIDO}"/>
                                        <h5 style="color: #fff; font-weight: bold;">M #{item.MESA}</h5>
                                        <f:passThroughAttribute name="data-toggle" value="tooltip"/>
                                        <f:passThroughAttribute name="data-placement" value="bottom"/>
                                        <f:passThroughAttribute name="title" value="#{item.STATUS eq 'P' ? 'Comanda em preconta' : 'Em consumo'}"/>
                                    </p:commandLink>
                                </div>
                                <div style="margin-top: 5px;margin-left: -5px;">
                                    <ul>
                                        <li>
                                            <p:commandLink id="imprimirComanda" class="btn btn-primary btn-block" disabled="#{item.MESA eq 'RSVA' }" 
                                                           process="@this" style="border: 0.2px solid #bbb;color: #fff;"
                                                           onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()"
                                                           actionListener="#{fastFoodBean.imprimirPrecontaMesa(item)}"
                                                           title="Imprimir Preconta">
                                                <i class="fa fa-print"></i>
                                            </p:commandLink>
                                        </li>
                                    </ul>   
                                </div>  
                            </li>
                        </ui:repeat>
                    </ul>
                </div>
            </h:form>
        </p:dialog> 
        <p:dialog widgetVar="statusDialog" modal="true" draggable="false" closable="false" resizable="false" showHeader="false"
                  responsive="true" showEffect="fade" hideEffect="fade">
            <h3 style="text-align: center;">Aguarde...</h3>
        </p:dialog>
    </h:body>
</html>

